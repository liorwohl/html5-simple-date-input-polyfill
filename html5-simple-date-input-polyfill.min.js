function calanderExtender(e){var t=this;this.theInput=e,this.container=null,this.theCalDiv=null,this.selectedDate=new Date,this.init=function(){this.getDateFromInput(),this.createCal()},this.getDateFromInput=function(){if(this.theInput.value){var e=new Date(this.theInput.value);if(Date.parse(this.theInput.value)&&e.toDateString()!==this.selectedDate.toDateString())return this.selectedDate=e,!0}return!1},this.createCal=function(){this.container=document.createElement("div"),this.container.className="calanderContainer",this.container.style.display="inline-block",this.theInput.parentNode.replaceChild(this.container,this.theInput),this.container.appendChild(this.theInput),this.theCalDiv=document.createElement("div"),this.theCalDiv.className="calander",this.theCalDiv.style.display="none",this.container.appendChild(this.theCalDiv),this.creathYearAndMonthSelects(),this.createMonthTable(),this.theInput.addEventListener("focus",function(){t.theCalDiv.style.display=""}),this.theInput.addEventListener("mouseup",function(){t.theCalDiv.style.display=""}),this.theInput.addEventListener("mousedown",function(){t.theCalDiv.style.display=""}),this.theInput.addEventListener("keyup",function(){t.getDateFromInput()&&t.updateSelecteds()}),document.addEventListener("click",function(e){e.target.parentNode!==t.container&&e.target.parentNode.parentNode!==t.container&&e.target.parentNode.parentNode!==t.theCalDiv&&(t.theCalDiv.style.display="none")})},this.creathYearAndMonthSelects=function(){var e=this.createRangeSelect((new Date).getFullYear()-80,(new Date).getFullYear()+20,this.selectedDate.getFullYear());e.className="yearSelect",this.theCalDiv.appendChild(e),e.onchange=function(){t.selectedDate.setYear(this.value),t.selectDate(),t.createMonthTable(),t.theInput.focus()};var a=["January","February","March","April","May","June","July","August","September","October","November","December"],n=this.createRangeSelect(0,11,this.selectedDate.getMonth(),a);n.className="monthSelect",this.theCalDiv.appendChild(n),n.onchange=function(){t.selectedDate.setMonth(this.value),t.selectDate(),t.createMonthTable(),t.theInput.focus()}},this.updateSelecteds=function(){this.theCalDiv.querySelector(".yearSelect").value=this.selectedDate.getFullYear(),this.theCalDiv.querySelector(".monthSelect").value=this.selectedDate.getMonth(),this.createMonthTable()},this.createMonthTable=function(){var e=this.selectedDate.getFullYear(),a=this.selectedDate.getMonth(),n=new Date(e,a,1).getDay(),i=new Date(this.selectedDate.getFullYear(),a+1,0).getDate(),l=this.theCalDiv.getElementsByTagName("table");l.length>0&&this.theCalDiv.removeChild(l[0]);var s=document.createElement("table");s.innerHTML="<tr><th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr>",this.theCalDiv.appendChild(s);for(var h,r,c=0;i+n>c;c++)if(c%7===0&&(h=s.insertRow(-1)),r=h.insertCell(-1),c+1>n){var d=c+1-n;r.innerHTML=d,d===this.selectedDate.getDate()&&(r.className="selected"),r.addEventListener("click",function(){t.theCalDiv.querySelector(".selected").className="",this.className="selected",t.selectedDate.setDate(parseInt(this.innerHTML)),t.selectDate(),t.theInput.focus()})}},this.selectDate=function(){var e=this.selectedDate.getMonth()+1;10>e&&(e="0"+e);var t=this.selectedDate.getDate();10>t&&(t="0"+t),this.theInput.value=""+this.selectedDate.getFullYear()+"-"+e+"-"+t;var a=document.createEvent("KeyboardEvent");a.initEvent("change",!0,!1),this.theInput.dispatchEvent(a)},this.createRangeSelect=function(e,t,a,n){var i,l,s,h=document.createElement("select");for(l=e;t>=l;l++)i=document.createElement("option"),h.appendChild(i),s=n?n[l-e]:l,i.text=s,i.value=l,l===a&&(i.selected=!0);return h},this.init()}function checkDateInputSupport(){var e=document.createElement("input");e.setAttribute("type","date");var t="not-a-date";return e.setAttribute("value",t),!(e.value===t)}function addCalanderExtenderToDateInputs(){var e=document.querySelectorAll("input[type=date]:not(.haveCal)");[].forEach.call(e,function(e){new calanderExtender(e),e.classList.add("haveCal")})}checkDateInputSupport()||"undefined"!=typeof window.orientation||(addCalanderExtenderToDateInputs(),document.querySelector("body").addEventListener("mousedown",function(e){addCalanderExtenderToDateInputs()}));